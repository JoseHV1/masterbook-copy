<div class="row my-5">
  <form [formGroup]="form">
    <div
      class="d-flex w-100 align-items-center justify-content-between"
      ngClass="{ 'justify-content-end': preselectedAccount }">
      <div class="col-8">
        <app-account-selector
          *ngIf="!preselectedAccount"
          (selectionChange)="handleAccountSelection($event)"
          [extendedInfo]="true"
          formControlName="client_id">
        </app-account-selector>
      </div>
      <button class="primary-button back-gray-500 white" (click)="reset()">
        Reset
      </button>
    </div>

    <div class="my-3 mb-md-3">
      <h4 class="subtitle-3 dark-blue-400 mb-md-4 mb-3">Account information</h4>

      <div class="row mb-3 mb-md-4">
        <div class="col-12 col-md-4 mb-4 mb-md-0">
          <label>Account *</label>
          <app-input
            placeholder="Select an account"
            type="text"
            formControlName="account_serial"></app-input>
        </div>

        <div class="col-12 col-md-4 mb-4 mb-md-0">
          <label>Account name *</label>
          <app-input
            placeholder="Select an account"
            type="text"
            formControlName="account_name"></app-input>
        </div>

        <div class="col-12 col-md-4 mb-4 mb-md-0">
          <label>Agent *</label>
          <app-input
            placeholder="Select an account"
            type="text"
            formControlName="agent_fullname"></app-input>
        </div>
      </div>
    </div>

    <div class="my-3 mb-md-3">
      <h4 class="subtitle-3 dark-blue-400 mb-md-4 mb-3">Client information</h4>

      <div class="row mb-3 mb-md-4">
        <div class="col-12 col-md-4 mb-4 mb-md-0">
          <label>Full name *</label>
          <app-input
            placeholder="Select an account"
            type="text"
            formControlName="client_fullname"></app-input>
        </div>

        <div class="col-12 col-md-4 mb-4 mb-md-0">
          <label>Date of birth*</label>
          <app-date-field
            [placeholder]="'Select an account'"
            formControlName="dob"></app-date-field>
        </div>

        <div class="col-12 col-md-4 mb-4 mb-md-0">
          <label>Gender *</label>
          <app-input
            placeholder="Select an account"
            type="text"
            formControlName="gender"></app-input>
        </div>

        <div class="col-12 col-md-4 mb-4 mb-md-0">
          <label>Marital status *</label>
          <app-input
            placeholder="Select an account"
            type="text"
            formControlName="marital_status"></app-input>
        </div>

        <div class="col-12 col-md-4 mb-4 mb-md-0">
          <label>Country *</label>
          <app-input
            placeholder="Select an account"
            type="text"
            formControlName="country"></app-input>
        </div>

        <div class="col-12 col-md-4 mb-4 mb-md-0">
          <label>Full address *</label>
          <app-input
            placeholder="Select an account"
            type="text"
            formControlName="address"></app-input>
        </div>

        <div class="col-12 col-md-4 mb-4 mb-md-0">
          <label>Email *</label>
          <app-input
            placeholder="Select an account"
            type="text"
            formControlName="email"></app-input>
        </div>

        <div class="col-12 col-md-4 mb-4 mb-md-0">
          <label>Phone number *</label>
          <app-input
            placeholder="Select an account"
            type="text"
            formControlName="phone"></app-input>
        </div>
      </div>
    </div>

    <div class="my-3 mb-md-3 mt-md-5">
      <h4 class="subtitle-3 dark-blue-400 mb-md-4 mb-3">Request information</h4>

      <div class="row mb-3 mb-md-4">
        <div class="col-12 col-md-4 mb-4 mb-md-0">
          <label>Object to insure *</label>
          <app-input
            placeholder="Type your object to insure"
            type="text"
            formControlName="insure_object"></app-input>
        </div>

        <div class="col-12 col-md-4 mb-4 mb-md-0">
          <label>Coverage limit *</label>
          <app-input
            placeholder="$ 0.00"
            type="tel"
            [inputMask]="'separator.2'"
            [maskPrefix]="'$ '"
            formControlName="coverage"></app-input>
        </div>

        <div class="col-12 col-md-4 mb-3 mb-md-4">
          <label>Location *</label>
          <app-address-input
            placeholder="Type the location"
            formControlName="address_info"></app-address-input>
        </div>

        <div class="col-12">
          <h4 class="subtitle-3 dark-blue-400 mb-md-4 mb-3">Forms</h4>
          <div class="d-flex flex-wrap justify-content-start">
            <ng-container *ngFor="let type of policy_types">
              <div class="policy-type-card my-1 mx-md-1 py-2 py-md-3 px-2">
                <div class="policy-type-card--data">
                  <p class="dark-blue-400 text-2 fw-semibold text-center">
                    <span class="material-icons-outlined">
                      {{ type.icon ?? 'circle' }}
                    </span>
                  </p>
                  <p class="dark-blue-400 text-2 fw-semibold text-center">
                    {{ type.name }}
                  </p>
                  <p class="gray-500 text-3 text-center">
                    ({{ type.naic_code }})
                  </p>
                  <div class="text-center mt-1">
                    <button
                      class="primary-button back-dark-blue-300 white mx-1"
                      (click)="openModalForms(type)">
                      View forms
                    </button>
                  </div>
                </div>
              </div>
            </ng-container>
          </div>
        </div>

        <h4 class="subtitle-3 dark-blue-400 my-md-4 my-3">
          Upload your completed request
        </h4>

        <div class="col-12 mt-2">
          <app-multi-file-upload
            formControlName="request_documents"></app-multi-file-upload>
        </div>
      </div>
    </div>

    <div class="d-flex justify-content-center">
      <button
        class="primary-button big-button back-gray-500 white mx-2"
        (click)="cancel()">
        Cancel
      </button>

      <button
        class="primary-button big-button back-light-blue-500 white mx-2"
        (click)="send()"
        [disabled]="form.invalid">
        {{ request ? 'Edit' : 'Save' }}
      </button>
    </div>
  </form>
</div>
