<app-pages-layout>
  <ng-container content>
    <ng-container *ngIf="!loading && connected; else waitOrConnect">
      <div
        class="row back-dark-blue-200 white mb-2 py-3 mx-0 rounded flex-column flex-md-row">
        <div
          class="col-12 col-md-6 d-flex justify-content-center justify-content-md-start align-items-center mb-2 mb-md-0">
          <button mat-icon-button (click)="nav('prev')" matTooltip="Previous">
            <mat-icon>chevron_left</mat-icon>
          </button>
          <button mat-button (click)="gotoToday()" class="white">Today</button>
          <button mat-icon-button (click)="nav('next')" matTooltip="Next">
            <mat-icon>chevron_right</mat-icon>
          </button>
        </div>

        <div
          class="col-12 col-md-6 d-flex justify-content-center justify-content-md-end align-items-center">
          <mat-button-toggle-group
            class="segmented segmented--toolbar"
            appearance="standard"
            [value]="currentView"
            (change)="changeView($event.value)"
            name="view"
            exclusive>
            <mat-button-toggle value="dayGridMonth">Month</mat-button-toggle>
            <mat-button-toggle value="timeGridWeek">Week</mat-button-toggle>
            <mat-button-toggle value="timeGridDay">Day</mat-button-toggle>
          </mat-button-toggle-group>
        </div>
      </div>

      <mat-divider></mat-divider>
      <full-calendar #fc [options]="calendarOptions"></full-calendar>
    </ng-container>

    <ng-template #waitOrConnect>
      <div class="p-4">
        <p *ngIf="loading">Checking Google connection…</p>
        <p *ngIf="!loading">Redirecting to connect Google Calendar…</p>
      </div>
    </ng-template>
  </ng-container>
</app-pages-layout>
