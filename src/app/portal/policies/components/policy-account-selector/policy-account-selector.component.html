<div
  class="d-flex flex-column py-4 w-100 align-items-center justify-content-center">
  <div class="col-12 col-md-6">
    <p class="text-center">Client</p>
    <app-account-selector
      (selectionChange)="handleAccountSelection($event)"
      [extendedInfo]="true"
      [(ngModel)]="account_id"></app-account-selector>
  </div>

  <div class="col-12 col-md-6 my-3" *ngIf="selectedAccount">
    <mat-accordion>
      <mat-expansion-panel [expanded]="true">
        <mat-expansion-panel-header>
          <mat-panel-title>
            <span class="subtitle-2 dark-blue-400">
              Selected client information
            </span>
          </mat-panel-title>
        </mat-expansion-panel-header>
        <ng-container [ngTemplateOutlet]="personalInfoTempalte"></ng-container>
      </mat-expansion-panel>
    </mat-accordion>
  </div>
</div>

<div class="d-flex justify-content-center">
  <button
    class="primary-button back-dark-blue-300 white mx-1 my-4"
    [disabled]="!selectedAccount"
    (click)="sendSelectedAccount()">
    Next
  </button>
</div>

<ng-template #personalInfoTempalte>
  <div class="row">
    <div class="col col-12 col-md-12 px-4 my-2">
      <div class="row">
        <div class="col col-4 black px-2 py-2">Account name</div>
        <div class="col col-8 black px-3 py-2 prop-box">
          {{ selectedAccount?.account_name | notNull }}
        </div>
      </div>
    </div>

    <div class="col col-12 col-md-6 px-4 my-2">
      <div class="row">
        <div class="col col-4 black px-2 py-2">Full name</div>
        <div class="col col-8 black px-3 py-2 prop-box">
          {{
            (selectedAccount?.user?.first_name | notNull) +
              ' ' +
              (selectedAccount?.user?.last_name | notNull)
          }}
        </div>
      </div>
    </div>

    <div class="col col-12 col-md-6 px-4 my-2">
      <div class="row">
        <div class="col col-4 black px-2 py-2">Date of birth</div>
        <div class="col col-8 black px-3 py-2 prop-box">
          {{ selectedAccount?.user?.date_of_birth | date | notNull }}
        </div>
      </div>
    </div>

    <div class="col col-12 col-md-6 px-4 my-2">
      <div class="row">
        <div class="col col-4 black px-2 py-2">Gender</div>
        <div class="col col-8 black px-3 py-2 prop-box">
          {{ selectedAccount?.user?.gender | notNull | enum }}
        </div>
      </div>
    </div>

    <div class="col col-12 col-md-6 px-4 my-2">
      <div class="row">
        <div class="col col-4 black px-2 py-2">Marital status</div>
        <div class="col col-8 black px-3 py-2 prop-box">
          {{ selectedAccount?.user?.marital_status | notNull | enum }}
        </div>
      </div>
    </div>

    <div class="col col-12 col-md-6 px-4 my-2">
      <div class="row">
        <div class="col col-4 black px-2 py-2">Country</div>
        <div class="col col-8 black px-3 py-2 prop-box">
          {{ selectedAccount?.user?.address_info?.country | notNull }}
        </div>
      </div>
    </div>

    <div class="col col-12 col-md-6 px-4 my-2">
      <div class="row">
        <div class="col col-4 black px-2 py-2">Full address</div>
        <div class="col col-8 black px-3 py-2 prop-box">
          {{ selectedAccount?.user?.address_info?.address | notNull }}
        </div>
      </div>
    </div>

    <div class="col col-12 col-md-6 px-4 my-2">
      <div class="row">
        <div class="col col-4 black px-2 py-2">Zip code</div>
        <div class="col col-8 black px-3 py-2 prop-box">
          {{ selectedAccount?.user?.address_info?.zipcode | notNull }}
        </div>
      </div>
    </div>

    <div class="col col-12 col-md-8 px-4 my-2">
      <div class="row">
        <div class="col col-4 black px-2 py-2">Email</div>
        <div class="col col-8 black px-3 py-2 prop-box">
          {{ selectedAccount?.user?.email | notNull }}
        </div>
      </div>
    </div>
  </div>
</ng-template>
